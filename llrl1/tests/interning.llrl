(import "~/interning" _)
(println! "llrl1/tests/interning")

(let1 tbl (intern-table/new)
  (assert (not (intern-table/has-interned? "hello" tbl)))
  (assert (not (intern-table/has-interned? "world" tbl)))
  (let1 hello (intern-table/intern! "hello" tbl)
    (assert-is? (some _) (intern-table/get-interned? "hello" tbl))
    (assert-is? none (intern-table/get-interned? "world" tbl))
    (let1 world (intern-table/intern! "world" tbl)
      (assert-eq? (intern-table/intern! "hello" tbl) hello)
      (assert-eq? (intern-table/intern! "world" tbl) world)
      (assert-ne? hello world)
      (assert-eq? (intern-table/review hello tbl) "hello")
      (assert-eq? (intern-table/review world tbl) "world"))))
